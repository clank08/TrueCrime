# True Crime Backend Environment Variables
# Copy this file to .env and fill in your values

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================
NODE_ENV=development
PORT=3000
HOST=0.0.0.0
LOG_LEVEL=debug

# ============================================================================
# DATABASE - SUPABASE
# ============================================================================
DATABASE_URL=postgresql://postgres:your_password@localhost:5432/truecrime
SUPABASE_URL=https://your-project-ref.supabase.co
SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here
SUPABASE_JWT_SECRET=your-supabase-jwt-secret

# ============================================================================
# REDIS CACHE
# ============================================================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_KEY_PREFIX=truecrime:
REDIS_TTL=3600

# ============================================================================
# AUTHENTICATION
# ============================================================================
JWT_SECRET=your-super-secret-jwt-key-change-in-production-minimum-256-bits
JWT_REFRESH_SECRET=your-refresh-jwt-secret-different-from-above
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d
SESSION_SECRET=your-session-secret-change-in-production
BCRYPT_ROUNDS=12

# Frontend URLs for redirects
FRONTEND_URL=http://localhost:19006
WEB_APP_URL=http://localhost:3000

# ============================================================================
# TEMPORAL WORKFLOWS
# ============================================================================
TEMPORAL_URL=localhost:7233
TEMPORAL_NAMESPACE=default
TEMPORAL_TASK_QUEUE=truecrime-tasks
TEMPORAL_WORKER_ENABLED=true

# ============================================================================
# MEILISEARCH
# ============================================================================
MEILISEARCH_URL=http://localhost:7700
MEILISEARCH_API_KEY=your-meilisearch-master-key
MEILISEARCH_INDEX_PREFIX=truecrime_

# ============================================================================
# EXTERNAL APIS
# ============================================================================
# Watchmode API (Primary streaming service data)
WATCHMODE_API_KEY=your-watchmode-api-key
WATCHMODE_API_URL=https://api.watchmode.com/v1

# TMDB API (Metadata and images)
TMDB_API_KEY=your-tmdb-api-key
TMDB_API_URL=https://api.themoviedb.org/3

# Gracenote API (Cable TV listings)
GRACENOTE_API_KEY=your-gracenote-api-key
GRACENOTE_API_URL=https://api.gracenote.com

# JustWatch API (Backup streaming data)
JUSTWATCH_API_KEY=your-justwatch-api-key
JUSTWATCH_API_URL=https://api.justwatch.com

# Reelgood API (Backup streaming data)
REELGOOD_API_KEY=your-reelgood-api-key
REELGOOD_API_URL=https://api.reelgood.com

# ============================================================================
# EMAIL & NOTIFICATIONS
# ============================================================================
# Resend for email
RESEND_API_KEY=your-resend-api-key
RESEND_FROM_EMAIL=notifications@truecrime.app

# Expo Push Notifications
EXPO_ACCESS_TOKEN=your-expo-access-token

# ============================================================================
# MONITORING & OBSERVABILITY
# ============================================================================
# Sentry Error Tracking
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# OpenTelemetry
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=truecrime-backend
OTEL_TRACES_ENABLED=true
OTEL_METRICS_ENABLED=true

# ============================================================================
# RATE LIMITING
# ============================================================================
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false
RATE_LIMIT_SKIP_FAILED_REQUESTS=false

# ============================================================================
# CORS CONFIGURATION
# ============================================================================
CORS_ORIGIN=http://localhost:3001,http://localhost:8081,exp://localhost:8081
CORS_CREDENTIALS=true

# ============================================================================
# API CONFIGURATION
# ============================================================================
API_PREFIX=/api/v1
API_BODY_LIMIT=10mb
API_PARAMETER_LIMIT=1000
TRUST_PROXY=true

# ============================================================================
# PERFORMANCE & OPTIMIZATION
# ============================================================================
NODE_OPTIONS=--max-old-space-size=1024
CLUSTER_WORKERS=0
CACHE_TTL_DEFAULT=300
CACHE_TTL_LONG=3600
CACHE_TTL_SHORT=60

# ============================================================================
# SECURITY
# ============================================================================
HELMET_ENABLED=true
CSRF_ENABLED=true
COOKIE_SECURE=false
COOKIE_HTTPONLY=true
COOKIE_SAMESITE=lax

# ============================================================================
# FEATURE FLAGS
# ============================================================================
FEATURE_SOCIAL_ENABLED=true
FEATURE_NOTIFICATIONS_ENABLED=true
FEATURE_ANALYTICS_ENABLED=true
FEATURE_BETA_FEATURES=false